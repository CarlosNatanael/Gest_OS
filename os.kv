#:import hex kivy.utils.get_color_from_hex
#:import DarkButton main.DarkButton
#:import DarkTextInput main.DarkTextInput

<DarkTextInput>:
    hint_text_color: hex('#AAAAAA')
    background_color: [0, 0, 0, 0]
    foreground_color: hex('#FFFFFF')
    cursor_color: hex('#BB86FC')
    selection_color: hex('#BB86FC55')
    padding: [15, 12]
    size_hint_y: None
    height: 45
    font_size: '14sp'
    canvas.before:
        Color:
            rgba: hex('#252525') if self.focus else hex('#1E1E1E')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [6]
        Color:
            rgba: hex('#333333')
        Line:
            width: 1
            rounded_rectangle: [self.x, self.y, self.width, self.height, 6]

<DarkButton@Button>:
    background_normal: ''
    background_down: ''
    background_color: (0, 0, 0, 0)
    color: hex('#FFFFFF')
    bold: True
    size_hint_y: None
    height: 45
    font_size: '14sp'
    canvas.before:
        Color:
            rgba: hex('#BB86FC') if self.state == 'normal' else hex('#9A65E3')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [6]
    on_press:
        self.opacity = 0.7
    on_release:
        self.opacity = 1

<FormularioOS>:
    orientation: "vertical"
    padding: [35, 20]
    spacing: 20
    canvas.before:
        Color:
            rgba: hex('#121212')
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        text: "ORDEM DE SERVIÇO"
        font_size: '18sp'
        bold: True
        color: hex('#BB86FC')
        size_hint_y: None
        height: 40

    BoxLayout:
        orientation: "vertical"
        spacing: 12
        padding: [15, 15, 15, 20]
        canvas.before:
            Color:
                rgba: hex('#1E1E1E')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [10]

        DarkTextInput:
            id: equipamento
            hint_text: "Equipamento *"

        DarkTextInput:
            id: problema
            hint_text: "Descrição do Problema"
            multiline: True
            height: 100

        DarkTextInput:
            id: solucao
            hint_text: "Solução Aplicada"
            multiline: True
            height: 100

        DarkTextInput:
            id: tempo_reparo
            hint_text: "Tempo Gasto (horas)"
            input_filter: "float"

    BoxLayout:
        size_hint_y: None
        height: 50
        spacing: 12

        DarkButton:
            text: "SALVAR OS"
            on_release: root.enviar_os()

    DarkButton:
        text: "LIMPAR"
        font_size: '14sp'
        on_release: root.limpar_campos()
        canvas.before:
            Color:
                rgba: hex('#242c40')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [6]

    DarkButton:
        text: "HISTÓRICO"
        font_size: '14sp'
        on_release: root.mostrar_os_salvas()
        canvas.before:
            Color:
                rgba: hex('#242c40')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [6]

    DarkButton:
        text: "RELATÓRIO"
        font_size: '14sp'
        on_release: app.root.mostrar_mensagem("Função ainda não implementada", "Relatório")
        canvas.before:
            Color:
                rgba: hex('#242c40')
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [6]
