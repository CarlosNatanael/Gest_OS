#:import hex kivy.utils.get_color_from_hex
#:import DarkButton main.DarkButton
#:import DarkTextInput main.DarkTextInput

<DarkTextInput>:
    hint_text_color: hex('#666666')
    background_color: hex('#252525')
    foreground_color: hex('#FFFFFF')
    cursor_color: hex('#BB86FC')
    selection_color: hex('#BB86FC55')
    padding: [15, 12]
    size_hint_y: None
    height: 45
    canvas.before:
        Color:
            rgba: hex('#333333')
        Line:
            width: 1
            rounded_rectangle: [self.x, self.y, self.width, self.height, 6]

<DarkButton@Button>:
    background_normal: ''
    background_down: ''
    background_color: (0, 0, 0, 0)
    color: hex('#FFFFFF')
    bold: True
    size_hint_y: None
    height: 45
    canvas.before:
        Color:
            rgba: hex('#BB86FC') if self.state == 'normal' else hex('#CF9EFF')
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [6]
    on_press:
        self.opacity = 0.7
    on_release:
        self.opacity = 1

<FormularioOS>:
    orientation: 'vertical'
    padding: 20
    spacing: 10
    canvas.before:
        Color:
            rgba: DarkTheme.bg_color
        Rectangle:
            pos: self.pos
            size: self.size

    DarkTextInput:
        id: equipamento
        hint_text: "Equipamento"
        multiline: False
        foreground_color: DarkTheme.text_primary
        background_color: DarkTheme.card_color
        cursor_color: DarkTheme.accent_color

    DarkTextInput:
        id: problema
        hint_text: "Problema"
        multiline: True
        foreground_color: DarkTheme.text_primary
        background_color: DarkTheme.card_color
        cursor_color: DarkTheme.accent_color

    DarkTextInput:
        id: solucao
        hint_text: "Solução"
        multiline: True
        foreground_color: DarkTheme.text_primary
        background_color: DarkTheme.card_color
        cursor_color: DarkTheme.accent_color

    DarkTextInput:
        id: tempo_reparo
        hint_text: "Tempo de Reparo (em horas)"
        multiline: False
        input_filter: 'float'
        foreground_color: DarkTheme.text_primary
        background_color: DarkTheme.card_color
        cursor_color: DarkTheme.accent_color

    BoxLayout:
        size_hint_y: None
        height: dp(50)
        spacing: 10

        DarkButton:
            text: "SALVAR OS"
            on_release: root.enviar_os()
            background_color: DarkTheme.accent_color
            color: DarkTheme.text_primary

        DarkButton:
            text: "LIMPAR"
            on_release: root.limpar_campos()
            background_color: DarkTheme.card_color
            color: DarkTheme.text_primary

    BoxLayout:
        size_hint_y: None
        height: dp(50)
        spacing: 10

        DarkButton:
            text: "HISTÓRICO"
            on_release: root.mostrar_os_salvas()
            background_color: DarkTheme.card_color
            color: DarkTheme.text_primary

        DarkButton:
            text: "RELATÓRIO"
            on_release: app.root.mostrar_mensagem("Função ainda não implementada", "Relatório")
            background_color: DarkTheme.card_color
            color: DarkTheme.text_primary